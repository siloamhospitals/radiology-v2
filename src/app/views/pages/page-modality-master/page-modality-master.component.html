<app-section-header></app-section-header>
<div class="d-flex justify-content-start">
  
  <div class="fo_menu_container">
      <app-section-sidebar></app-section-sidebar>
  </div>
  <div class="fo_content_container mt-4 d-block" >
    <div class="box bg-white">
      <div class="header-radiology-schedule" >

        
        <div class="row border-bottom">
          <div class="col-md-3">
            <h3 class="p-3 ">
              Pengaturan Modality
            </h3>
            <app-modality-tab>
    
            </app-modality-tab>
          </div>
          <div class="col-md-7 justify-content-end">

          </div>
          <div class="col-md-2 justify-content-end">
            <h3 class="p-3">
              <button class="btn btn-primary ml-2" (click)="showModalityModal()">+ Add New Modality</button>
            </h3>
          </div>
        </div>
        <div class="px-3 border-bottom" >
          <div class="row border-bottom mb-5" style="height: 52px;;" >
            <div class="col-md-3 position-relative mt-3 pr-0 mb-2 border-right">
              <input class="form-control pt-3 input-filter pr-4" type="text" placeholder="Cari Label"
                title="Find patients" [(ngModel)]="selectedModalityLabel" (change)="onItemSelect()"/>
              <span class="fa fa-search position-absolute"></span>
            </div>
            <div class="col-md-2 position-relative mt-3 pr-0 border-right" >
              <ng-select
                [multiple]="true"
                [items]="modalityOptions"
                [closeOnSelect]="false"
                [searchable]="true"
                [(ngModel)]="selectedItemsModality"
                placeholder="Pilih Modality"
                bindLabel="name"
                (change)="onItemSelect()"
                bindValue="modality_id">
              </ng-select>
            </div>
            <div class="col-md-2 position-relative mt-3 pr-0 border-right" >
              <ng-select
                [multiple]="true"
                [items]="dropdownListSchduleType"
                [(ngModel)]="selectedItemsSchdule"
                placeholder="Jenis Penjadwalan"
                (change)="onItemSelect()"
                bindLabel="item_text"
                bindValue="operational_type">
            <!-- <ng-template ng-header-tmp>
                <button (click)="selectAll()" class="btn btn-sm btn-secondary">Select all</button>
                <button (click)="unselectAll()" class="btn btn-sm btn-secondary">Unselect all</button>
            </ng-template> -->
            <!-- <ng-template ng-footer-tmp>
                Selected count: {{selectedPeople.length}}
            </ng-template> -->
            </ng-select>
            </div>
            <div class="col-md-2 position-relative mt-3 pr-0 border-right" >
              <ng-select
                [multiple]="true"
                [items]="roomOptions"
                [(ngModel)]="selectedItemsFloor"
                placeholder="Pilih Lantai"
                (change)="onItemSelect()"
                bindLabel="floor_name"
                bindValue="floor_id">
            <!-- <ng-template ng-header-tmp>
                <button (click)="selectAll()" class="btn btn-sm btn-secondary">Select all</button>
                <button (click)="unselectAll()" class="btn btn-sm btn-secondary">Unselect all</button>
            </ng-template> -->
            <!-- <ng-template ng-footer-tmp>
                Selected count: {{selectedPeople.length}}
            </ng-template> -->
            </ng-select>
            </div>
            <div class="col-md-2 position-relative mt-3 pr-0 border-right" >
              <ng-select
                [multiple]="true"
                [items]="dropdownListStatus"
                [(ngModel)]="this.selectedItemsStatus"
                placeholder="Pilih Status"
                bindLabel="item_text"
                (change)="onItemSelect()"
                bindValue="status">
            <!-- <ng-template ng-header-tmp>
                <button (click)="selectAll()" class="btn btn-sm btn-secondary">Select all</button>
                <button (click)="unselectAll()" class="btn btn-sm btn-secondary">Unselect all</button>
            </ng-template> -->
            <!-- <ng-template ng-footer-tmp>
                Selected count: {{selectedPeople.length}}
            </ng-template> -->
            </ng-select>
            </div>

          </div>
          <div class="table-head-sticky">
            <table class="table table-borderless table-stripped" id="appointment-list-table">
              <thead class="border-0 bg-secondary">
                <th style="min-width: 10em">
                  Label
                </th>
                <th style="min-width: 10em">
                  Modality
                </th>
                <th>Tipe Penjadwalan</th>
                <th width="100px" style="text-align: left">Lantai</th>
                <th width="100px" style="text-align: left">Ruangan</th>
                <th width="100px" style="text-align: left">Dur (min)</th>
                <th class="text-center" width="100px">Status</th>
                <th class="pr-3" style="text-align: right; min-width: 10em;">Action</th>
                <th width="50px"></th>
              </thead>

              <tbody>
                <ng-container *ngIf="isLoading; else showList">
                  <tr>
                    <td colspan="100%" class="text-center p-3">Memuat data mohon tunggu...</td>
                  </tr>
                </ng-container>
                <ng-template #showList>
                  <ng-container *ngIf="!(operationals.data && operationals.data.length)">
                    <tr>
                      <td colspan="100%" class="text-center p-3">Data currently does not exist</td>
                    </tr>
                  </ng-container>
                </ng-template>
                <tr *ngFor="let item of operationals.data; let i = index">
                  <td>{{item.modality_label}}</td>
                  <td>{{item.modality_name}}</td>
                  <td>{{item.operational_type_label}}</td>
                  <td style="text-align: left">{{item.room.floor_name}}</td>
                  <td style="text-align: left">{{item.room.name}}</td>
                  <td style="text-align: left">{{item.operational_type == 3 ? item.duration : '-'}}</td>
                  <td>
                    <span *ngIf="item.status == 1" class="modality-status status-scheduled">Active</span>
                    <span *ngIf="item.status == 2" class="modality-status status-arrived">Tidak Aktif</span>
                  </td>
                  <td class="pr-3" style="text-align: right">
                    <a class="detailed-button" (click)="showModalityModal(item, true)">Detail</a>
                  </td>
                  <td></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
